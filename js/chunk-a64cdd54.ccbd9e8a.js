(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a64cdd54"],{"0976":function(t,e,n){},"20ca":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t,e){var n=null;return function(){var r=this;null!==n&&clearTimeout(n),n=setTimeout((function(){t.apply(r)}),e)}}},"22e9":function(t,e,n){"use strict";n("b16c")},2423:function(t,e,n){"use strict";n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return u}));var r=n("b775"),a=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_1/articles",params:t})},i=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})},c=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})},o=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})},s=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/likings",data:{target:t}})},u=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/likings/".concat(t)})}},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),c=n("ad6d"),o="toString",s=RegExp.prototype,u=s[o],l=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=o;(l||f)&&r(RegExp.prototype,o,(function(){var t=a(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in s)?c.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2803:function(t,e,n){},2909:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){if(Array.isArray(t))return r(t)}n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("fb6a"),n("25f0");function c(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return a(t)||i(t)||c(t)||o()}},"3be4":function(t,e,n){"use strict";n("fa8b")},"3f0a":function(t,e,n){"use strict";n("2803")},"4df4":function(t,e,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),c=n("e95a"),o=n("50c4"),s=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,f,d,p,h=a(t),v="function"==typeof this?this:Array,b=arguments.length,m=b>1?arguments[1]:void 0,g=void 0!==m,C=u(h),_=0;if(g&&(m=r(m,b>2?arguments[2]:void 0,2)),void 0==C||v==Array&&c(C))for(e=o(h.length),n=new v(e);e>_;_++)p=g?m(h[_],_):h[_],s(n,_,p);else for(f=C.call(h),d=f.next,n=new v;!(l=d.call(f)).done;_++)p=g?i(f,m,[l.value,_],!0):l.value,s(n,_,p);return n.length=_,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(t,e,n){var r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var i,c;return a&&"function"==typeof(i=e.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(t,c),t}},"7abe":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("van-nav-bar",{staticClass:"app-nav-bar"},[n("van-button",{staticClass:"search-btn",attrs:{slot:"title",type:"info",round:"",size:"small",icon:"search",to:"/search"},slot:"title"},[t._v("搜索")])],1),n("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("div",{staticClass:"wap-nav-wrap",attrs:{slot:"nav-right"},on:{click:function(e){t.isChannelShow=!0}},slot:"nav-right"},[n("van-icon",{attrs:{name:"wap-nav"}})],1),n("div",{staticClass:"zhanwei",attrs:{slot:"nav-right"},slot:"nav-right"}),t._l(t.channels,(function(t,e){return n("van-tab",{key:e,attrs:{title:t.name}},[n("Article-List",{attrs:{channel:t}})],1)}))],2),n("van-popup",{staticClass:"channel-popup",staticStyle:{height:"96%"},attrs:{closeable:"",round:"","get-container":"body","close-icon-position":"top-left",position:"bottom"},model:{value:t.isChannelShow,callback:function(e){t.isChannelShow=e},expression:"isChannelShow"}},[n("ChannelEdit",{attrs:{userChannels:t.channels,active:t.active},on:{"update-active":function(e){t.active=e},close:function(e){t.isChannelShow=!1}}})],1)],1)},a=[],i=(n("96cf"),n("1da1")),c=n("5530"),o=n("c24f"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"article-list",staticClass:"article-list"},[n("van-pull-refresh",{attrs:{"success-duration":1200,"success-text":t.successText},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articles,(function(t,e){return n("Article-Item",{key:e,attrs:{title:t.title,article:t}})})),1)],1)],1)},u=[],l=n("2909"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("keep-alive",[n("van-cell",{staticClass:"article-item",attrs:{to:{name:"article",params:{articleId:t.article.art_id}}}},[n("div",{staticClass:"title van-multi-ellipsis--l3",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.article.title)+" ")]),n("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[3===t.article.cover.type?n("div",{staticClass:"cover-wrap"},t._l(t.article.cover.images,(function(t,e){return n("van-image",{key:e,staticClass:"cover-wrap-item",attrs:{fit:"cover",src:t}})})),1):t._e(),n("div",{staticClass:"label-wrap"},[n("span",{staticClass:"article"},[t._v(t._s(t.article.aut_name))]),n("span",{staticClass:"article"},[t._v(t._s(t.article.comm_count)+"评论")]),n("span",{staticClass:"article"},[t._v(t._s(t._f("relativeTime")(t.article.pubdate))+" ")])])]),1===t.article.cover.type?n("van-image",{attrs:{fit:"cover",src:t.article.cover.images[0]}}):t._e()],1)],1)},d=[],p={name:"ArticleItem",props:{article:{type:Object,required:!0}},components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},activated:function(){}},h=p,v=(n("e703"),n("2877")),b=Object(v["a"])(h,f,d,!1,null,"30e30a04",null),m=b.exports,g=n("2423"),C=n("20ca"),_={name:"ArticleList",components:{ArticleItem:m},props:{channel:{type:Object,required:!0}},data:function(){return{articles:[],loading:!1,finished:!1,timestamp:null,count:0,isLoading:!1,successText:"",scrollTop:0}},methods:{onLoad:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["f"])({channel_id:t.channel.id,timestamp:t.timestamp||Date.now(),with_top:1});case 2:r=e.sent,a=r.data,i=a.data.results,(n=t.articles).push.apply(n,Object(l["a"])(i)),t.loading=!1,i.length?t.timestamp=a.data.pre_timestamp:t.finished=!0;case 8:case"end":return e.stop()}}),e)})))()},onRefresh:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["f"])({channel_id:t.channel.id,timestamp:Date.now(),with_top:1});case 2:r=e.sent,a=r.data,i=a.data.results,(n=t.articles).unshift.apply(n,Object(l["a"])(i)),t.isLoading=!1,t.successText="更新了 ".concat(i.length," 条数据");case 8:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this,e=this.$refs["article-list"];e.onscroll=Object(C["a"])((function(){t.scrollTop=e.scrollTop}),700)},activated:function(){var t=this.$refs["article-list"];t.scrollTop=this.scrollTop,console.log(this.scrollTop)}},y=_,O=(n("3f0a"),Object(v["a"])(y,s,u,!1,null,"5f83d3ea",null)),w=O.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channle-edit"},[n("van-cell",{attrs:{center:"",border:!1}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("我的频道")]),n("van-button",{staticClass:"channle-btn",attrs:{plain:"",hairline:"",round:"",type:"primary",size:"mini"},on:{click:function(e){t.isEdit=!t.isEdit}}},[n("span",{domProps:{textContent:t._s(t.isEdit?"完成":"编辑")}})])],1),n("van-grid",{attrs:{gutter:10}},t._l(t.userChannels,(function(e,r){return n("van-grid-item",{key:r,class:{active:r===t.active},attrs:{text:e.name},on:{click:function(n){return t.visitChannelClick(e,r)}}},[n("van-icon",{attrs:{slot:"icon",name:t.isEdit&&0!==r?"clear":""},on:{click:function(n){return t.onUserChannelClick(e,r)}},slot:"icon"})],1)})),1),n("van-cell",{attrs:{center:"",border:!1}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("推荐频道")])]),n("van-grid",{attrs:{gutter:10}},t._l(t.recommendChannels,(function(e,r){return n("van-grid-item",{key:r,attrs:{text:e.name,clickable:"true"},on:{click:function(n){return t.onAdd(e,r)}}},[n("van-icon",{attrs:{slot:"icon",name:t.isEdit&&r>=0?"add-o":""},slot:"icon"})],1)})),1)],1)},x=[],j=(n("4de4"),n("7db0"),n("a434"),n("a9e3"),n("b775")),A=function(){return Object(j["a"])({method:"GET",url:"/app/v1_0/channels"})},k=function(t){return Object(j["a"])({method:"PATCH",url:"/app/v1_0/user/channels",data:t})},T=function(t){return Object(j["a"])({method:"DELETE",url:"/app/v1_0/user/channels/".concat(t)})},S=n("2f62"),I=n("5d2d"),R={name:"Channle-Edit",props:{userChannels:{type:Array,required:!0},active:{type:Number,required:!0}},components:{},data:function(){return{isEdit:!1,allChannels:[]}},computed:Object(c["a"])(Object(c["a"])({},Object(S["b"])(["user"])),{},{recommendChannels:function(){var t=this;return this.allChannels.filter((function(e){return!t.userChannels.find((function(t){return t.id===e.id}))}))}}),watch:{},methods:{loadAllChannels:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:n=e.sent,r=n.data,t.allChannels=r.data.channels;case 5:case"end":return e.stop()}}),e)})))()},onAdd:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.isEdit?n.userChannels.push(t):n.isEdit||n.visitChannelClick(t,e),!n.user){r.next=6;break}return r.next=4,k({channels:[{id:t.id,seq:n.userChannels.length}]});case 4:r.next=7;break;case 6:Object(I["b"])("user-channels",n.userChannels);case 7:case"end":return r.stop()}}),r)})))()},onUserChannelClick:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e<=n.active&&n.$emit("update-active",n.active-1),n.userChannels.splice(e,1),!n.user){r.next=7;break}return r.next=5,T(t.id);case 5:r.next=8;break;case 7:Object(I["b"])("user-channels",n.userChannels);case 8:case"end":return r.stop()}}),r)})))()},visitChannelClick:function(t,e){this.isEdit||(this.$emit("update-active",e),this.$emit("close"))}},created:function(){this.loadAllChannels()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},activated:function(){}},N=R,L=(n("3be4"),Object(v["a"])(N,E,x,!1,null,"6964460b",null)),$=L.exports,G={name:"HomeIndex",components:{ArticleList:w,ChannelEdit:$},data:function(){return{isChannelShow:!1,channels:[],active:0}},computed:Object(c["a"])({},Object(S["b"])(["user"])),created:function(){this.loadChannels()},methods:{loadChannels:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=[],!t.user){e.next=9;break}return e.next=4,Object(o["d"])();case 4:r=e.sent,a=r.data,n=a.data.channels,e.next=19;break;case 9:if(i=Object(I["a"])("user-channels"),!i){e.next=14;break}n=i,e.next=19;break;case 14:return e.next=16,Object(o["d"])();case 16:c=e.sent,s=c.data,n=s.data.channels;case 19:t.channels=n;case 20:case"end":return e.stop()}}),e)})))()}}},P=G,D=(n("22e9"),Object(v["a"])(P,r,a,!1,null,"1180f6f6",null));e["default"]=D.exports},"7db0":function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").find,i=n("44d2"),c=n("ae40"),o="find",s=!0,u=c(o);o in[]&&Array(1)[o]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},"9bdd":function(t,e,n){var r=n("825a"),a=n("2a62");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(c){throw a(t),c}}},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:c},{from:a})},a9e3:function(t,e,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),o=n("5135"),s=n("c6b6"),u=n("7156"),l=n("c04e"),f=n("d039"),d=n("7c73"),p=n("241c").f,h=n("06cf").f,v=n("9bf2").f,b=n("58a8").trim,m="Number",g=a[m],C=g.prototype,_=s(d(C))==m,y=function(t){var e,n,r,a,i,c,o,s,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=b(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=u.slice(2),c=i.length,o=0;o<c;o++)if(s=i.charCodeAt(o),s<48||s>a)return NaN;return parseInt(i,r)}return+u};if(i(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var O,w=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof w&&(_?f((function(){C.valueOf.call(n)})):s(n)!=m)?u(new g(y(e)),n,w):y(e)},E=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;E.length>x;x++)o(g,O=E[x])&&!o(w,O)&&v(w,O,h(g,O));w.prototype=C,C.constructor=w,c(a,m,w)}},b16c:function(t,e,n){},c24f:function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"i",(function(){return i})),n.d(e,"h",(function(){return c})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return d}));var r=n("b775"),a=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})},i=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})},c=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})},o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})},s=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},u=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},l=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/channels"})},f=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},d=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})}},e703:function(t,e,n){"use strict";n("0976")},fa8b:function(t,e,n){},fb6a:function(t,e,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),c=n("23cb"),o=n("50c4"),s=n("fc6a"),u=n("8418"),l=n("b622"),f=n("1dde"),d=n("ae40"),p=f("slice"),h=d("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),b=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!p||!h},{slice:function(t,e){var n,r,l,f=s(this),d=o(f.length),p=c(t,d),h=c(void 0===e?d:e,d);if(i(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return b.call(f,p,h);for(r=new(void 0===n?Array:n)(m(h-p,0)),l=0;p<h;p++,l++)p in f&&u(r,l,f[p]);return r.length=l,r}})}}]);
//# sourceMappingURL=chunk-a64cdd54.ccbd9e8a.js.map