(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c6088f1"],{"12d3":function(e,t,n){"use strict";var r=n("c419"),a=n.n(r);a.a},"1f45":function(e,t,n){"use strict";var r=n("c493"),a=n.n(r);a.a},"20ca":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){var n=null;return function(){var r=this;null!==n&&clearTimeout(n),n=setTimeout((function(){e.apply(r)}),t)}}},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),a=n("825a"),o=n("d039"),c=n("ad6d"),i="toString",s=RegExp.prototype,u=s[i],f=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=i;(f||l)&&r(RegExp.prototype,i,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in s)?c.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},2909:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(Array.isArray(e))return r(e)}n.d(t,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("fb6a"),n("25f0");function c(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return a(e)||o(e)||c(e)||i()}},"4d63":function(e,t,n){var r=n("83ab"),a=n("da84"),o=n("94ca"),c=n("7156"),i=n("9bf2").f,s=n("241c").f,u=n("44e7"),f=n("ad6d"),l=n("9f7f"),h=n("6eeb"),d=n("d039"),p=n("69f3").set,y=n("2626"),v=n("b622"),b=v("match"),g=a.RegExp,m=g.prototype,S=/a/g,w=/a/g,x=new g(S)!==S,R=l.UNSUPPORTED_Y,O=r&&o("RegExp",!x||R||d((function(){return w[b]=!1,g(S)!=S||g(w)==w||"/a/i"!=g(S,"i")})));if(O){var H=function(e,t){var n,r=this instanceof H,a=u(e),o=void 0===t;if(!r&&a&&e.constructor===H&&o)return e;x?a&&!o&&(e=e.source):e instanceof H&&(o&&(t=f.call(e)),e=e.source),R&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var i=c(x?new g(e,t):g(e,t),r?this:m,H);return R&&n&&p(i,{sticky:n}),i},j=function(e){e in H||i(H,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},_=s(g),k=0;while(_.length>k)j(_[k++]);m.constructor=H,H.prototype=m,h(a,"RegExp",H)}y("RegExp")},"4df4":function(e,t,n){"use strict";var r=n("0366"),a=n("7b0b"),o=n("9bdd"),c=n("e95a"),i=n("50c4"),s=n("8418"),u=n("35a1");e.exports=function(e){var t,n,f,l,h,d,p=a(e),y="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,g=void 0!==b,m=u(p),S=0;if(g&&(b=r(b,v>2?arguments[2]:void 0,2)),void 0==m||y==Array&&c(m))for(t=i(p.length),n=new y(t);t>S;S++)d=g?b(p[S],S):p[S],s(n,S,d);else for(l=m.call(p),h=l.next,n=new y;!(f=h.call(l)).done;S++)d=g?o(l,b,[f.value,S],!0):f.value,s(n,S,d);return n.length=S,n}},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var o,c;return a&&"function"==typeof(o=t.constructor)&&o!==n&&r(c=o.prototype)&&c!==n.prototype&&a(e,c),e}},"8f06":function(e,t,n){"use strict";n("e532")},"9bdd":function(e,t,n){var r=n("825a"),a=n("2a62");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(c){throw a(e),c}}},a630:function(e,t,n){var r=n("23e7"),a=n("4df4"),o=n("1c7e"),c=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:c},{from:a})},a8f5:function(e,t,n){"use strict";var r=n("e61f"),a=n.n(r);a.a},c419:function(e,t){},c493:function(e,t){},e532:function(e,t,n){},e61f:function(e,t){},efe3:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("keep-alive",[n("div",{staticClass:"search-container"},[n("form",{attrs:{action:""}},[n("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:function(t){return e.onSearch(e.searchValue)},cancel:function(t){return e.$router.back()},focus:function(t){e.isResultShow=!1}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e.isResultShow?n("SearchResult",{attrs:{"search-value":e.searchValue}}):e.searchValue?n("SeacchSuggestion",{attrs:{"search-value":e.searchValue},on:{search:e.onSearch}}):n("SeacchHistory",{attrs:{"search-history":e.searchHistory},on:{search:e.onSearch}})],1)])},a=[],o=(n("c975"),n("a434"),n("96cf"),n("1da1")),c=n("5530"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-suggestion"},e._l(e.searchResult,(function(t,r){return n("van-cell",{key:r,attrs:{icon:"search"},on:{click:function(n){return e.$emit("search",t)}}},[n("div",{attrs:{slot:"title"},domProps:{innerHTML:e._s(e.heightStr(t))},slot:"title"})])})),1)},s=[],u=(n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("b775")),f=function(e){return Object(u["a"])({method:"GET",url:"/app/v1_0/suggestion",params:{q:e}})},l=function(e){return Object(u["a"])({method:"GET",url:"/app/v1_0/search",params:e})},h=n("20ca"),d={name:"SeacchSuggestion",props:{searchValue:{type:String,required:!0}},components:{},data:function(){return{searchResult:[],htmlstr:'<span style="color:red">{{str}}</span>'}},computed:{},watch:{searchValue:{handler:Object(h["a"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f(this.searchValue);case 2:t=e.sent,n=t.data,this.searchResult=n.data.options;case 5:case"end":return e.stop()}}),e,this)}))),800),immediate:!0,deep:!0}},methods:{heightStr:function(e){var t=new RegExp(this.searchValue,"ig");return e.replace(t,'<span style="color:red">'.concat(this.searchValue,"</span>"))}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},activated:function(){}},p=d,y=(n("12d3"),n("2877")),v=Object(y["a"])(p,i,s,!1,null,"cb8d285e",null),b=v.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-history"},[n("van-cell",{attrs:{title:"历史记录"}},[e.isDeleteShow?n("van-icon",{attrs:{name:"delete"},on:{click:e.allDelete}}):n("span",[e._v("无")])],1),e._l(e.searchHistory,(function(t,r){return n("van-cell",{key:r,attrs:{title:t},on:{click:function(n){return e.onSearch(t,r)}}},[n("van-icon",{directives:[{name:"show",rawName:"v-show",value:0<=r,expression:"0 <= index"}],attrs:{name:"close"},on:{click:function(t){return t.stopPropagation(),e.deleteHistory(r)}}})],1)}))],2)},m=[],S=n("5d2d"),w={name:"searchhistory",props:{searchHistory:{type:Array,required:!0}},components:{},data:function(){return{historyLength:0}},computed:{isDeleteShow:{get:function(){return this.historyLength+this.searchHistory.length},set:function(){this.historyLength=this.searchHistory.length}}},watch:{},methods:{onSearch:function(e,t){this.$emit("search",e)},deleteHistory:function(e){this.searchHistory.splice(e,1),Object(S["b"])("search-history",this.searchHistory),console.log("deletehistory")},allDelete:function(){this.searchHistory.splice(0,this.isDeleteShow),Object(S["b"])("search-history",this.searchHistory),this.isDeleteShow=!1,this.$toast("全部删除完成")}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},activated:function(){}},x=w,R=(n("1f45"),Object(y["a"])(x,g,m,!1,null,"4d654f44",null)),O=R.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"serach-result"},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.resultList,(function(e,t){return n("van-cell",{key:t,attrs:{title:e.title}})})),1)],1)},j=[],_=n("2909"),k={name:"SerachResult",props:{searchValue:{type:String,required:!0}},components:{},data:function(){return{resultList:[],loading:!1,finished:!1,page:1,per_page:10}},computed:{},watch:{},methods:{onLoad:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l({page:e.page,per_page:e.per_page,q:e.searchValue});case 2:r=t.sent,a=r.data,o=a.data.results,(n=e.resultList).push.apply(n,Object(_["a"])(o)),e.loading=!1,o.length?e.page++:e.finished=!1;case 8:case"end":return t.stop()}}),t)})))()}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},activated:function(){}},A=k,E=(n("8f06"),Object(y["a"])(A,H,j,!1,null,"5162df5b",null)),V=E.exports,C=n("2f62"),D={name:"search",props:{},components:{SeacchSuggestion:b,SeacchHistory:O,SearchResult:V},data:function(){return{searchValue:"",isResultShow:!1,searchHistory:[]}},computed:Object(c["a"])({},Object(C["b"])(["user"])),watch:{},methods:{onSearch:function(e){this.searchValue=e;var t=this.searchHistory.indexOf(e);-1!==t&&this.searchHistory.splice(t,1),this.searchHistory.unshift(e),Object(S["b"])("search-history",this.searchHistory),this.isResultShow=!0},onCancel:function(){console.log("cancel")},loadSearchHistory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(S["a"])("search-history")||[],e.searchHistory=n;case 2:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadSearchHistory()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},activated:function(){}},L=D,$=(n("a8f5"),Object(y["a"])(L,r,a,!1,null,"e3c3d1f0",null));t["default"]=$.exports},fb6a:function(e,t,n){"use strict";var r=n("23e7"),a=n("861d"),o=n("e8b5"),c=n("23cb"),i=n("50c4"),s=n("fc6a"),u=n("8418"),f=n("b622"),l=n("1dde"),h=n("ae40"),d=l("slice"),p=h("slice",{ACCESSORS:!0,0:0,1:2}),y=f("species"),v=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(e,t){var n,r,f,l=s(this),h=i(l.length),d=c(e,h),p=c(void 0===t?h:t,h);if(o(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?a(n)&&(n=n[y],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(l,d,p);for(r=new(void 0===n?Array:n)(b(p-d,0)),f=0;d<p;d++,f++)d in l&&u(r,f,l[d]);return r.length=f,r}})}}]);
//# sourceMappingURL=chunk-1c6088f1.fe3652cc.js.map